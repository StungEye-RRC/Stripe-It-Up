<h1>All Products</h1>

<details>
  <summary>Shopping Cart (<%= @cart.size %>)</summary>
  <ul>
    <% @cart.each do |cart_item| %>
      <li><%= cart_item.name %> <%= link_to 'x', remove_from_cart_path(cart_item), method: :delete %></li>
    <% end %>
  </ul>
</details>

<% @products.each do |product| %>
  <h3><%= product.name %></h3>
  <% if product.image.present? %>
    <p><%= image_tag product.image.variant(resize_to_limit: [100, 100]).processed  %></p>
  <% end %>

  <% if @cart.include?(product) %>
    <%= button_to 'Remove From Cart', remove_from_cart_path(product), method: :delete %>
  <% else %>
    <%= button_to 'Add to Cart', add_to_cart_path(product), method: :post %>
  <% end %>

  <p>Price: <%= number_to_currency product.price_cents / 100.0 %></p>
  <p><%= product.description %></p>
<% end %>